<div class="app-layout">
  <!-- Sidebar Fixe -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <i class="fas fa-hand-holding-heart"></i>
      <span>OMNIA</span>
    </div>
    
    <nav class="sidebar-nav">
      <a routerLink="/dashboard" class="nav-item active" routerLinkActive="active">
        <i class="fas fa-th-large"></i>
        <span>Dashboard</span>
      </a>
      <a routerLink="/families" class="nav-item" routerLinkActive="active">
        <i class="fas fa-users"></i>
        <span>Familles</span>
      </a>
      <a routerLink="/donations" class="nav-item" routerLinkActive="active">
        <i class="fas fa-donate"></i>
        <span>Dons</span>
      </a>
      <a routerLink="/inventory" class="nav-item" routerLinkActive="active">
        <i class="fas fa-boxes"></i>
        <span>Inventaire</span>
      </a>
      <a routerLink="/settings" class="nav-item" routerLinkActive="active">
        <i class="fas fa-cog"></i>
        <span>Param√®tres</span>
      </a>
    </nav>
    
    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <div class="user-details">
          <span class="user-name">Administrateur</span>
          <span class="user-role">Admin</span>
        </div>
      </div>
    </div>
  </aside>

  <!-- Contenu Principal -->
  <main class="main-container">
    <!-- Topbar -->
    <header class="topbar">
      <div class="topbar-left">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Rechercher familles, dons, √©v√©nements...">
        </div>
      </div>
      
      <div class="topbar-right">
        <div class="date-display">
          <i class="fas fa-calendar-alt"></i>
          <span>{{ currentDate | date:'EEEE d MMMM yyyy' }}</span>
        </div>
        
        <button class="notification-btn" aria-label="Notifications">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </button>
        
        <button (click)="refreshData()" class="refresh-btn">
          <i class="fas fa-sync-alt"></i>
          Actualiser
        </button>
      </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-content">
      <!-- Header -->
      <div class="dashboard-header">
        <div>
          <h1 class="dashboard-title">Bonjour üëã</h1>
          <p class="dashboard-subtitle">Bienvenue sur votre tableau de bord OMNIA</p>
        </div>
        <div class="header-stats">
          <div class="header-stat">
            <span class="stat-value">{{ totalFamilies | number }}</span>
            <span class="stat-label">Familles aid√©es</span>
          </div>
          <div class="header-stat">
            <span class="stat-value">{{ totalDonations | currency:'TND':'symbol':'1.0-0' }}</span>
            <span class="stat-label">Dons collect√©s</span>
          </div>
        </div>
      </div>

      <!-- Statistiques -->
      <div class="stats-grid">
        <div *ngFor="let stat of statistics" class="stat-card-wrapper">
          <app-stats-card [stat]="stat"></app-stats-card>
        </div>
      </div>

      <!-- Graphique + Sidebar -->
      <div class="content-grid">
        <!-- Colonne Principale -->
        <div class="main-column">
          <!-- Graphique -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>√âvolution des Dons Mensuels</h3>
              <div class="chart-actions">
                <select class="period-select" (change)="onPeriodChange($event)">
                  <option value="month">Ce mois</option>
                  <option value="quarter">Ce trimestre</option>
                  <option value="year" selected>Cette ann√©e</option>
                </select>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="monthlyDonationsChart"></canvas>
            </div>
            <div class="chart-footer">
              <div class="chart-summary">
                <span class="summary-label">Total annuel:</span>
                <span class="summary-value">{{ annualTotal | currency:'TND':'symbol':'1.0-0' }}</span>
              </div>
              <div class="chart-trend">
                <span class="trend-indicator positive">
                  <i class="fas fa-arrow-up"></i>
                  {{ growthRate }}% vs. l'ann√©e derni√®re
                </span>
              </div>
            </div>
          </div>

          <!-- Section suppl√©mentaire pour d'autres graphiques -->
          <div class="charts-row">
            <div class="small-chart-card">
              <h4>Distribution par Type</h4>
              <div class="mini-chart" style="height: 200px;">
                <!-- Mini chart placeholder -->
              </div>
            </div>
            <div class="small-chart-card">
              <h4>Taux de Conversion</h4>
              <div class="mini-chart" style="height: 200px;">
                <!-- Mini chart placeholder -->
              </div>
            </div>
          </div>
        </div>

        <!-- Colonne Lat√©rale -->
        <div class="sidebar-column">
          <!-- Actions Rapides -->
          <div class="quick-actions-card">
            <div class="card-header">
              <h3>Actions Rapides</h3>
              <button class="see-all-btn">Voir tout</button>
            </div>
            <div class="quick-actions-grid">
              <button class="quick-action primary" (click)="addFamily()">
                <i class="fas fa-user-plus"></i>
                <span>Ajouter Famille</span>
              </button>
              <button class="quick-action success" (click)="recordDonation()">
                <i class="fas fa-hand-holding-usd"></i>
                <span>Enregistrer Don</span>
              </button>
              <button class="quick-action warning" (click)="distributeAid()">
                <i class="fas fa-truck-loading"></i>
                <span>Distribuer Aide</span>
              </button>
              <button class="quick-action info" (click)="generateReport()">
                <i class="fas fa-chart-pie"></i>
                <span>G√©n√©rer Rapport</span>
              </button>
              <button class="quick-action secondary" (click)="scheduleEvent()">
                <i class="fas fa-calendar-plus"></i>
                <span>Planifier √âv√©nement</span>
              </button>
              <button class="quick-action dark" (click)="manageInventory()">
                <i class="fas fa-box-open"></i>
                <span>G√©rer Stock</span>
              </button>
            </div>
          </div>

          <!-- Prochains √âv√©nements -->
          <div class="events-card">
            <div class="card-header">
              <h3>Prochains √âv√©nements</h3>
              <button class="calendar-btn" routerLink="/calendar">
                <i class="fas fa-calendar"></i>
                Calendrier
              </button>
            </div>
            
            <div class="events-list">
              <div *ngFor="let event of upcomingEvents" class="event-item">
                <div class="event-date">
                  <span class="event-day">{{ event.date | date:'dd' }}</span>
                  <span class="event-month">{{ event.date | date:'MMM' }}</span>
                </div>
                <div class="event-details">
                  <h4 class="event-title">{{ event.title }}</h4>
                  <div class="event-meta">
                    <span class="event-time">
                      <i class="far fa-clock"></i>
                      {{ event.time }}
                    </span>
                    <span class="event-location">
                      <i class="fas fa-map-marker-alt"></i>
                      {{ event.location }}
                    </span>
                  </div>
                  <span class="event-status" [class]="event.status">
                    {{ event.status === 'confirmed' ? 'Confirm√©' : 'Planifi√©' }}
                  </span>
                </div>
                <button class="event-action-btn">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
              </div>
            </div>
            
            <button class="add-event-btn" (click)="addEvent()">
              <i class="fas fa-plus"></i>
              Ajouter un √©v√©nement
            </button>
          </div>

          <!-- Stats Rapides -->
          <div class="quick-stats-card">
            <h3>Statistiques Rapides</h3>
            <div class="quick-stats-grid">
              <div class="quick-stat">
                <div class="quick-stat-icon pending">
                  <i class="fas fa-user-clock"></i>
                </div>
                <div class="quick-stat-info">
                  <span class="quick-stat-value">{{ pendingFamilies }}</span>
                  <span class="quick-stat-label">Familles en attente</span>
                </div>
              </div>
              <div class="quick-stat">
                <div class="quick-stat-icon urgent">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="quick-stat-info">
                  <span class="quick-stat-value">{{ urgentNeeds }}</span>
                  <span class="quick-stat-label">Besoins urgents</span>
                </div>
              </div>
              <div class="quick-stat">
                <div class="quick-stat-icon completed">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="quick-stat-info">
                  <span class="quick-stat-value">{{ completedDistributions }}</span>
                  <span class="quick-stat-label">Distributions</span>
                </div>
              </div>
              <div class="quick-stat">
                <div class="quick-stat-icon volunteers">
                  <i class="fas fa-hands-helping"></i>
                </div>
                <div class="quick-stat-info">
                  <span class="quick-stat-value">{{ activeVolunteers }}</span>
                  <span class="quick-stat-label">B√©n√©voles actifs</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>